plugins {
    id 'kotlin'
    id 'java-gradle-plugin'
    id 'maven-publish'
}

dependencies {
    // Align versions of all Kotlin components
    implementation platform('org.jetbrains.kotlin:kotlin-bom')

    // Use the Kotlin JDK 8 standard library.
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'

    compileOnly gradleApi()
    compileOnly 'com.android.tools.build:gradle:7.4.1'
}

gradlePlugin {
    // Define the plugin
    plugins {
        idGuard {
            id = 'idguard'
            implementationClass = 'com.idguard.IdGuardPlugin'
        }
    }
}

publishing {
    publications {
        idGuard(MavenPublication) {
            groupId = 'com.github.ztwave'
            artifactId = 'idguard'
            version = "$version"
            from components.java
        }
    }
}